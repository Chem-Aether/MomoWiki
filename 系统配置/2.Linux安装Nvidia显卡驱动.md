# Linux的显卡驱动安装

在Ubuntu 24.04系统上为NVIDIA显卡安装驱动的大致步骤如下：

## 准备工作
首先，需要进入BIOS，关闭主板的安全项-启动保护。

在最初始的系统下，需要安装一些依赖项，使用下列命令：
```
sudo apt-get update
 
sudo apt-get install g++
 
sudo apt-get install gcc
 
sudo apt-get install make
```

## 方法一：使用官方PPA源安装
1. **禁用nouveau驱动**
   因为ubuntu系统自带一个显卡驱动，我们需要先禁用它。
   
   打开终端，创建文件：
   ```bash
   sudo gedit /etc/modprobe.d/blacklist-nouveau.conf
   ```
   在文件中添加以下内容：
   ```
   blacklist nouveau
   options nouveau modeset=0
   ```
   保存并关闭文件，然后执行：
   ```bash
   sudo update-initramfs -u
   ```
   重启系统：
   ```bash
   sudo reboot
   ```
2. **添加NVIDIA官方PPA源**
   执行命令：
   ```bash
   sudo add-apt-repository ppa:graphics-drivers/ppa
   ```
3. **更新软件包列表**
   运行：
   ```bash
   sudo apt update
   ```
4. **安装驱动及依赖库**
   可以先查看推荐安装的驱动版本：
   ```bash
   ubuntu-drivers devices
   ```
   通常推荐的NVIDIA驱动版本能满足需求，执行安装命令（以 `nvidia-driver-580` 为例，根据实际推荐版本调整）：
   ```bash
   sudo apt install nvidia-driver-580
   ```
   安装过程中，系统会自动处理相关依赖库的安装，常见的依赖库包括与图形渲染、内核交互等相关的库。
5. **重启并验证**
   安装完成后，重启系统：
   ```bash
   sudo reboot
   ```
   进入系统后，打开终端，执行 `nvidia-smi` 命令，若能显示显卡信息，则说明驱动安装成功。

## 方法二：使用NVIDIA官方.run安装文件安装
1. **下载驱动文件**
   前往NVIDIA官方驱动下载页面（https://www.nvidia.com/download/index.aspx ），根据显卡型号（RTX 5060 Ti）、操作系统（Linux 64-bit - Ubuntu 24.04）等信息下载对应的 `.run` 安装文件，假设下载的文件名为 `NVIDIA-Linux-x86_64.run` 。
2. **禁用nouveau驱动（同方法一第一步）**
   操作步骤一致，创建文件并添加相关内容，更新initramfs并重启。
3. **安装必要的依赖库**
   安装编译驱动所需的工具和库：
   ```bash
   sudo apt install build-essential dkms linux-headers-$(uname -r)
   ```
   `build-essential` 提供编译环境，`dkms` 用于处理内核模块的动态加载，`linux-headers-$(uname -r)` 是与当前内核版本对应的头文件，确保驱动能正确编译和加载。
4. **关闭图形界面**
   切换到终端（按 `Ctrl+Alt+F3` ），登录后执行：
   ```bash
   sudo service lightdm stop
   ```
5. **赋予安装文件执行权限并安装**
   进入驱动文件所在目录，执行：
   ```bash
   sudo chmod +x NVIDIA-Linux-x86_64.run
   sudo ./NVIDIA-Linux-x86_64.run
   ```
   在安装过程中，按照提示操作，可能会遇到选择安装组件、确认协议等步骤。
6. **重启图形界面并验证**
   安装完成后，执行：
   ```bash
   sudo service lightdm start
   ```
   重启系统：
   ```bash
   sudo reboot
   ```
   进入系统后，使用 `nvidia-smi` 验证驱动是否安装成功。 

## 安装验证
安装完成后，输入以下命令验证安装状况：
```bash
nvidia-smi
```